!function(e){"use strict";var a=function(){function e(e,a){for(var t in a){var n=a[t];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,a)}return function(a,t,n){return t&&e(a.prototype,t),n&&e(a,n),a}}(),t=function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")},n=function(e){var l=e.fn.wysiwyg,o={toolbar:[["mode"],["styles"],["fonts",["select","size"]],["text",["bold","italic","underline","color"]],["align",["left","center","right","justify"]],["lists",["default","numeric","level-indent","level-outdent"]],["components",["table","chart"]],["props",["interval","line-height","letter-spacing"]],["insert",["emoji","link","image","video","symbol","bookmark"]],["special",["print","clean"]],["fullscreen"]],mode:"editor",fontSizes:["8px","9px","10px","11px","12px","13px","14px","15px","16px","17px","18px"],fontSizeDefault:["12px"],fontFamilies:["Open Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],fontFamilyDefault:["Open Sans"]},i=function(){function l(a,n){var i=this;t(i,l),i._config=e.extend({},o,n),i._editorId="wysiwyg-"+(String.fromCharCode(Math.floor(11*Math.random()))+Math.floor(1e6*Math.random())).trim(),i._$element=a instanceof jQuery?a:e(a),i._inputId=i._$element.attr("id"),i._$editor=e('<div id="'+i._editorId+'" aria-describedby="#'+i._inputId+'" class="wysiwyg-editor" />'),i._$element.wrap(i._$editor),i._$content=e('<div class="editor-content" contenteditable="true" />'),i._$content.html(i._$element.val()),i._$element.before(i._$content),i._source=i._$element.val(),i._$toolbar=e('<div class="wysiwyg-toolbar btn-toolbar" />'),i._$content.before(i._$toolbar),i._$statusbar=e('<div class="editor-statusbar" />'),i._$content.after(i._$statusbar),i._$element.addClass("hide"),"object"==typeof i._config.toolbar&&e.each(i._config.toolbar,function(a,t){var n=e('<div class="btn-group" role="group" aria-label="..." />');if("mode"===t[0])n.append(i._buildTollbarButton("mode","editor","fa fa-eye",null)),n.append(i._buildTollbarButton("mode","source","fa fa-code",null));else if("styles"===t[0]){n.append(i._buildTollbarDropdown("select-style",{"Header H1":{action:"wrap",value:"<h1 />"},"Header H2":{action:"wrap",value:"<h2 />"},"Header H3":{action:"wrap",value:"<h3 />"}},"fa fa-header","Style"))}else if("fonts"===t[0]){if(-1!==t[1].indexOf("select",0)){var l={};e.each(i._config.fontFamilies,function(e,a){l[a]={action:"style",value:"font-family:'"+a+"';"}}),n.append(i._buildTollbarDropdown("font-select",l,"fa fa-underline",i._config.fontFamilyDefault))}if(-1!==t[1].indexOf("size",0)){var o={};e.each(i._config.fontSizes,function(e,a){o[a]={action:"style",value:"font-size: "+a+";"}}),n.append(i._buildTollbarDropdown("font-size",o,null,i._config.fontSizeDefault))}n.append(i._buildTollbarDropdown("font-size",["test1","test2","test3","test4","test5"],"fa fa-underline","test3"))}else"text"===t[0]?(-1!==t[1].indexOf("bold",0)&&n.append(i._buildTollbarButton("text","bold","fa fa-bold",null)),-1!==t[1].indexOf("italic",0)&&n.append(i._buildTollbarButton("text","italic","fa fa-italic",null)),-1!==t[1].indexOf("underline",0)&&n.append(i._buildTollbarButton("text","underline","fa fa-underline",null)),-1!==t[1].indexOf("color",0)&&n.append(i._buildTollbarButton("text","color","fa fa-font",null))):"align"===t[0]?(-1!==t[1].indexOf("left",0)&&n.append(i._buildTollbarButton("align","left","fa fa-align-left",null)),-1!==t[1].indexOf("center",0)&&n.append(i._buildTollbarButton("align","center","fa fa-align-center",null)),-1!==t[1].indexOf("right",0)&&n.append(i._buildTollbarButton("align","right","fa fa-align-right",null)),-1!==t[1].indexOf("justify",0)&&n.append(i._buildTollbarButton("align","justify","fa fa-align-justify",null))):"lists"===t[0]?(-1!==t[1].indexOf("default",0)&&n.append(i._buildTollbarButton("lists","default","fa fa-list-ul",null)),-1!==t[1].indexOf("numeric",0)&&n.append(i._buildTollbarButton("lists","numeric","fa fa-list-ol",null)),-1!==t[1].indexOf("level-indent",0)&&n.append(i._buildTollbarButton("lists","level-indent","fa fa-indent",null)),-1!==t[1].indexOf("level-outdent",0)&&n.append(i._buildTollbarButton("lists","level-outdent","fa fa-outdent",null))):"components"===t[0]?(-1!==t[1].indexOf("table",0)&&n.append(i._buildTollbarButton("components","table","fa fa-table",null)),-1!==t[1].indexOf("chart",0)&&n.append(i._buildTollbarButton("components","chart","fa fa-pie-chart",null))):"props"===t[0]?(-1!==t[1].indexOf("interval",0)&&n.append(i._buildTollbarButton("props","interval","fa fa-bars",null)),-1!==t[1].indexOf("line-height",0)&&n.append(i._buildTollbarButton("props","line-height","fa fa-text-height",null)),-1!==t[1].indexOf("letter-spacing",0)&&n.append(i._buildTollbarButton("props","letter-spacing","fa fa-text-width",null))):"insert"===t[0]?(-1!==t[1].indexOf("emoji",0)&&n.append(i._buildTollbarButton("insert","emoji","fa fa-smile-o",null)),-1!==t[1].indexOf("link",0)&&n.append(i._buildTollbarButton("insert","link","fa fa-link",null)),-1!==t[1].indexOf("image",0)&&n.append(i._buildTollbarButton("insert","image","fa fa-image",null)),-1!==t[1].indexOf("video",0)&&n.append(i._buildTollbarButton("insert","video","fa fa-video-camera",null)),-1!==t[1].indexOf("symbol",0)&&n.append(i._buildTollbarButton("insert","symbol","fa fa-hashtag",null)),-1!==t[1].indexOf("bookmark",0)&&n.append(i._buildTollbarButton("insert","bookmark","fa fa-bookmark",null))):"special"===t[0]?(-1!==t[1].indexOf("print",0)&&n.append(i._buildTollbarButton("special","print","fa fa-print",null)),-1!==t[1].indexOf("clean",0)&&n.append(i._buildTollbarButton("special","clean","fa fa-eraser",null))):"fullscreen"===t[0]&&(n.addClass("pull-right"),n.append(i._buildTollbarButton("fullscreen",!0,"fa fa-arrows-alt",null)));i._$toolbar.append(n)}),i._$toolbar.length&&i._$toolbar.on("click","[data-action]",function(a){var t=e(a.currentTarget),n=t.data("action"),l=t.data("value");if(n&&l)switch(n){case"mode":switch(l){case"editor":i._config.mode!==l&&(i._config.mode=l,i._$content.html(i._source),i._$toolbar.find('[data-action="mode"]').removeClass("active"),i._$toolbar.find('[data-action="mode"][data-value="editor"]').addClass("active"),i._$content.addClass("editor-mode").removeClass("source-mode"),i._$content.focus());break;case"source":if(i._config.mode!==l){i._config.mode=l,i._source=i._$content.html();var o=e("<pre />");o.text(i._source),i._$content.html(i._trimSource(o.html())),i._$toolbar.find('[data-action="mode"]').removeClass("active"),i._$toolbar.find('[data-action="mode"][data-value="source"]').addClass("active"),i._$content.removeClass("editor-mode").addClass("source-mode"),i._$content.focus()}}break;case"wrap":case"style":case"fullscreen":console.log("Fire action: "+n+" with value: "+l);break;case"text":switch(l){case"bold":case"italic":case"underline":case"color":console.log("Fire action: "+n+" with value: "+l)}break;case"align":switch(l){case"left":case"center":case"right":case"justify":console.log("Fire action: "+n+" with value: "+l)}break;case"lists":switch(l){case"default":case"numeric":case"level-indent":case"level-outdent":console.log("Fire action: "+n+" with value: "+l)}break;case"components":switch(l){case"table":case"chart":console.log("Fire action: "+n+" with value: "+l)}break;case"props":switch(l){case"interval":case"line-height":case"letter-spacing":console.log("Fire action: "+n+" with value: "+l)}break;case"insert":switch(l){case"emoji":case"link":case"image":case"video":case"symbol":case"bookmark":console.log("Fire action: "+n+" with value: "+l)}break;case"special":switch(l){case"print":case"clean":console.log("Fire action: "+n+" with value: "+l)}break;default:console.warn("Unrecognized action: "+n+" with value: "+l)}}),i._$content.on("mouseup keyup",function(e){window.getSelection()}),i._$content.on("click keyup",function(a){const t=e(this);window.getSelection();var n=e(a.target),l=i._getPath(n,i._$content);switch(l.tags[0]){case"b":i._$toolbar.find('[data-action="text"]').removeClass("active"),i._$toolbar.find('[data-action="text"][data-value="bold"]').addClass("active");break;case"u":i._$toolbar.find('[data-action="text"]').removeClass("active"),i._$toolbar.find('[data-action="text"][data-value="underline"]').addClass("active");break;case"i":i._$toolbar.find('[data-action="text"]').removeClass("active"),i._$toolbar.find('[data-action="text"][data-value="italic"]').addClass("active");break;case"a":i._$toolbar.find('[data-action="insert"]').removeClass("active"),i._$toolbar.find('[data-action="insert"][data-value="link"]').addClass("active");break;case"p":i._$toolbar.find('[data-action="align"]').removeClass("active"),"center"==n.css("text-align")?i._$toolbar.find('[data-action="align"][data-value="center"]').addClass("active"):"right"==n.css("text-align")?i._$toolbar.find('[data-action="align"][data-value="right"]').addClass("active"):"justify"==n.css("text-align")?i._$toolbar.find('[data-action="align"][data-value="justify"]').addClass("active"):i._$toolbar.find('[data-action="align"][data-value="left"]').addClass("active");break;default:i._$toolbar.find('[data-action="insert"]').removeClass("active")}i._$statusbar.text(l.path),t.trigger("change")}),i._$content.on("change",function(a){const t=e(this);"editor"==i._config.mode?i._source=t.html():i._source=t.text(),i._$element.val(i._source)})}return a(l,{element:{value:function(){return this._$element}},_trimSource:{value:function(e){return e=(e=(e=e.replace(/\s{4,}/g,"")).replace(/\t/g," ")).toString().trim().replace(/(\r\n|\n|\r)/g,"")}},_getPath:{value:function(a,t){for(var n,l=[];a.length;){var o=a[0],i=o.localName,r=a.parentsUntil(t);if(!i)break;i=i.toLowerCase(),l.push(i);var d=e(o).attr("id");d&&(i+="#"+d);var c=e(o).attr("class");c&&(i+="."+c.replace(/\./g,".")),n=i+(n?" > "+n:""),a=r}return{path:n,tags:l}}},_buildTollbarButton:{value:function(a,t,n,l){var o=e('<button type="button" class="btn btn-default" tabindex="-1" />');return a&&o.attr("data-action",a),t&&o.attr("data-value",t),l&&o.attr("data-hotkey",l),n&&o.append('<span class="'+n+'" />'),o}},_buildTollbarDropdown:{value:function(a,t,n,l){var o=e('<div class="dropdown" />'),i=e('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" />'),r=e('<ul class="dropdown-menu" />'),d=e("<li />"),c=e('<a href="#" tabindex="-1" />');return"object"==typeof t&&e.each(t,function(t,n){var o=c.clone(),i=d.clone();"object"==typeof n?(n.action&&o.attr("data-action",n.action),n.value&&o.attr("data-value",n.value),"wrap"==n.action?o.html(e(n.value).text(t)):o.text(t),"style"==n.action&&o.attr("style",n.value.toString()),t==l&&i.addClass("active"),i.append(o),r.append(i)):(o.text(n),o.attr("data-action",a),o.attr("data-value",n),n==l&&i.addClass("active"),i.append(o),r.append(i))}),n&&i.prepend('<span class="'+n+'" /> '),l?i.text(l+" "):i.text("Dropdown "),i.append('<b class="caret" />'),o.append(i),o.append(r),o}}},{Default:{get:function(){return o}},_jQueryInterface:{value:function(a){var t=this;return a=a||{},t.each(function(){var o=e(t),i=e.extend({},n.Default,o.data(),"object"==typeof a&&a);new l(t,i)})}}}),l}();return e.fn.wysiwyg=i._jQueryInterface,e.fn.wysiwyg.Constructor=i,e.fn.wysiwyg.noConflict=function(){return e.fn.wysiwyg=l,i._jQueryInterface},i}(jQuery)}(jQuery);
//# sourceMappingURL=wysiwyg.js.map