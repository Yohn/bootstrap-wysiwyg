!function(t){"use strict";var e=function(){function t(t,e){for(var a in e){var n=e[a];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}(),a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(t){var o=t.fn.wysiwyg,r={toolbar:[["mode"],["operations",["undo","rendo","cut","copy","paste"]],["styles"],["fonts",["select","size"]],["text",["bold","italic","underline","strike","subscript","superscript","font-color","bg-color"]],["align",["left","center","right","justify"]],["lists",["unordered","ordered","indent","outdent"]],["components",["table","chart"]],["intervals",["line-height","letter-spacing"]],["insert",["emoji","link","image","video","symbol","bookmark"]],["special",["print","unformat","clean"]],["fullscreen"]],mode:"editor",fontSizes:["8px","9px","10px","11px","12px","14px","15px","16px","18px","20px","24px","30px","32px","36px","48px"],fontSizeDefault:["12px"],fontFamilies:["Open Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],fontFamilyDefault:["Open Sans"],colorPalette:[["rgb(0, 0, 0)","rgb(67, 67, 67)","rgb(102, 102, 102)","rgb(153, 153, 153)","rgb(183, 183, 183)","rgb(204, 204, 204)","rgb(217, 217, 217)","rgb(239, 239, 239)","rgb(243, 243, 243)","rgb(255, 255, 255)"],["rgb(152, 0, 0)","rgb(255, 0, 0)","rgb(255, 153, 0)","rgb(255, 255, 0)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(74, 134, 232)","rgb(0, 0, 255)","rgb(153, 0, 255)","rgb(255, 0, 255)"],["rgb(230, 184, 175)","rgb(244, 204, 204)","rgb(252, 229, 205)","rgb(255, 242, 204)","rgb(217, 234, 211)","rgb(208, 224, 227)","rgb(201, 218, 248)","rgb(207, 226, 243)","rgb(217, 210, 233)","rgb(234, 209, 220)","rgb(221, 126, 107)","rgb(234, 153, 153)","rgb(249, 203, 156)","rgb(255, 229, 153)","rgb(182, 215, 168)","rgb(162, 196, 201)","rgb(164, 194, 244)","rgb(159, 197, 232)","rgb(180, 167, 214)","rgb(213, 166, 189)","rgb(204, 65, 37)","rgb(224, 102, 102)","rgb(246, 178, 107)","rgb(255, 217, 102)","rgb(147, 196, 125)","rgb(118, 165, 175)","rgb(109, 158, 235)","rgb(111, 168, 220)","rgb(142, 124, 195)","rgb(194, 123, 160)","rgb(166, 28, 0)","rgb(204, 0, 0)","rgb(230, 145, 56)","rgb(241, 194, 50)","rgb(106, 168, 79)","rgb(69, 129, 142)","rgb(60, 120, 216)","rgb(61, 133, 198)","rgb(103, 78, 167)","rgb(166, 77, 121)","rgb(133, 32, 12)","rgb(153, 0, 0)","rgb(180, 95, 6)","rgb(191, 144, 0)","rgb(56, 118, 29)","rgb(19, 79, 92)","rgb(17, 85, 204)","rgb(11, 83, 148)","rgb(53, 28, 117)","rgb(116, 27, 71)","rgb(91, 15, 0)","rgb(102, 0, 0)","rgb(120, 63, 4)","rgb(127, 96, 0)","rgb(39, 78, 19)","rgb(12, 52, 61)","rgb(28, 69, 135)","rgb(7, 55, 99)","rgb(32, 18, 77)","rgb(76, 17, 48)"]]},l=function(){function o(e,n){var l=this;a(l,o),l._config=t.extend({},r,n),l._editorId="wysiwyg-"+(String.fromCharCode(Math.floor(11*Math.random()))+Math.floor(1e6*Math.random())).trim(),l._$element=e instanceof jQuery?e:t(e),l._inputId=l._$element.attr("id"),l._$editor=t('<div id="'+l._editorId+'" aria-describedby="#'+l._inputId+'" class="wysiwyg-editor" />'),l._$element.wrap(l._$editor),l._$content=t('<div class="editor-content" contenteditable="true" />'),l._$content.html(l._$element.val()),l._$element.before(l._$content),l._source=l._$element.val(),l._selection=document.getSelection(),l._popoverIsVisible=!1,l._$lastFocus=null,l._$toolbar=t('<div class="wysiwyg-toolbar btn-toolbar" />'),l._$content.before(l._$toolbar),l._$statusbar=t('<div class="editor-statusbar" />'),l._$statusbar.stat=t('<span class="editor-statusbar-stat" />'),l._$statusbar.path=t('<span class="editor-statusbar-path" />'),l._$statusbar.append(l._$statusbar.stat),l._$statusbar.append(l._$statusbar.path),l._$content.after(l._$statusbar),l._$element.addClass("hide"),"object"==typeof l._config.toolbar&&t.each(l._config.toolbar,function(e,a){var n=t('<div class="btn-group" role="group" aria-label="..." />');if("mode"===a[0])n.append(l._buildTollbarButton("mode","editor","fa fa-eye",null)),n.append(l._buildTollbarButton("mode","source","fa fa-code",null));else if("operations"===a[0])n.append(l._buildTollbarButton("operations","undo","fa fa-mail-reply",null)),n.append(l._buildTollbarButton("operations","rendo","fa fa-mail-forward",null)),n.append(l._buildTollbarButton("operations","cut","fa fa-cut",null)),n.append(l._buildTollbarButton("operations","copy","fa fa-copy",null)),n.append(l._buildTollbarButton("operations","paste","fa fa-clipboard",null));else if("styles"===a[0]){n.append(l._buildTollbarDropdown("select-style",{"Header H1":{action:"formatblock",value:"h1",wrap:"<h1 />"},"Header H2":{action:"formatblock",value:"h2",wrap:"<h2 />"},"Header H3":{action:"formatblock",value:"h3",wrap:"<h3 />"},"Header H4":{action:"formatblock",value:"h4",wrap:"<h4 />"},"Header H5":{action:"formatblock",value:"h5",wrap:"<h5 />"},"Header H6":{action:"formatblock",value:"h6",wrap:"<h6 />"},Paragraph:{action:"formatblock",value:"p",wrap:"<p />"},Blockquote:{action:"formatblock",value:"blockquote",wrap:"<blockquote />"},Preformatted:{action:"formatblock",value:"pre",wrap:"<pre />"},"Div block":{action:"formatblock",value:"div",wrap:"<div />"}},"Paragraph"))}else if("fonts"===a[0]){if(-1!==a[1].indexOf("select",0)){var o={};t.each(l._config.fontFamilies,function(t,e){o[e]={action:"fontname",value:e,style:"font-family: "+e+";"}}),n.append(l._buildTollbarDropdown("font-select",o,l._config.fontFamilyDefault))}if(-1!==a[1].indexOf("size",0)){var r={};t.each(l._config.fontSizes,function(t,e){r[e]={action:"fontsize",value:e}}),n.append(l._buildTollbarDropdown("font-size",r,l._config.fontSizeDefault))}}else"text"===a[0]?(-1!==a[1].indexOf("bold",0)&&n.append(l._buildTollbarButton("text","bold","fa fa-bold",null)),-1!==a[1].indexOf("italic",0)&&n.append(l._buildTollbarButton("text","italic","fa fa-italic",null)),-1!==a[1].indexOf("underline",0)&&n.append(l._buildTollbarButton("text","underline","fa fa-underline",null)),-1!==a[1].indexOf("strike",0)&&n.append(l._buildTollbarButton("text","strike","fa fa-strikethrough",null)),-1!==a[1].indexOf("subscript",0)&&n.append(l._buildTollbarButton("text","subscript","fa fa-subscript",null)),-1!==a[1].indexOf("superscript",0)&&n.append(l._buildTollbarButton("text","superscript","fa fa-superscript",null)),-1!==a[1].indexOf("bg-color",0)&&n.append(l._buildTollbarButton("text","font-color","fa fa-font",null,"Lines interval",function(){return l._buildColorPalette(l._config.colorPalette,"font-color",null)})),-1!==a[1].indexOf("bg-color",0)&&n.append(l._buildTollbarButton("text","bg-color","fa fa-paint-brush",null,"Lines interval",function(){return l._buildColorPalette(l._config.colorPalette,"bg-color",!0)}))):"align"===a[0]?(-1!==a[1].indexOf("left",0)&&n.append(l._buildTollbarButton("align","left","fa fa-align-left",null,"Align left",null)),-1!==a[1].indexOf("center",0)&&n.append(l._buildTollbarButton("align","center","fa fa-align-center",null,"Align center",null)),-1!==a[1].indexOf("right",0)&&n.append(l._buildTollbarButton("align","right","fa fa-align-right",null,"Align right",null)),-1!==a[1].indexOf("justify",0)&&n.append(l._buildTollbarButton("align","justify","fa fa-align-justify",null,"Justify content",null))):"lists"===a[0]?(-1!==a[1].indexOf("unordered",0)&&n.append(l._buildTollbarButton("lists","unordered","fa fa-list-ul",null)),-1!==a[1].indexOf("ordered",0)&&n.append(l._buildTollbarButton("lists","ordered","fa fa-list-ol",null)),-1!==a[1].indexOf("indent",0)&&n.append(l._buildTollbarButton("lists","indent","fa fa-indent",null)),-1!==a[1].indexOf("outdent",0)&&n.append(l._buildTollbarButton("lists","outdent","fa fa-outdent",null))):"components"===a[0]?(-1!==a[1].indexOf("table",0)&&n.append(l._buildTollbarButton("components","table","fa fa-table",null,"Insert table",function(){return l._buildTableGrid()})),-1!==a[1].indexOf("chart",0)&&n.append(l._buildTollbarButton("components","chart","fa fa-pie-chart",null))):"intervals"===a[0]?(-1!==a[1].indexOf("line-height",0)&&n.append(l._buildTollbarButton("interval","line-height","fa fa-text-height",null,"Lines interval",function(){return'<ul class="nav nav-pills nav-stacked">\n  <li role="presentation"><a href="#" data-action="line-height" data-value="0.5">0.5</a></li>\n  <li role="presentation"><a href="#" data-action="line-height" data-value="1.0">1.0</a></li>\n  <li role="presentation"><a href="#" data-action="line-height" data-value="1.15">1.15</a></li>\n  <li role="presentation"><a href="#" data-action="line-height" data-value="1.5">1.5</a></li>\n  <li role="presentation"><a href="#" data-action="line-height" data-value="2.0">2.0</a></li>\n</ul>'})),-1!==a[1].indexOf("letter-spacing",0)&&n.append(l._buildTollbarButton("interval","letter-spacing","fa fa-text-width",null,"Letter spacing",function(){return'<ul class="nav nav-pills nav-stacked">\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="-5">-5</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="-3">-3</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="-2">-2</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="-1">-1</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="0">0</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="1">1</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="2">2</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="3">3</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="5">5</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="8">8</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="10">10</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="12">12</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="15">15</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="25">25</a></li>\n  <li role="presentation"><a href="#" data-action="letter-spacing" data-value="50">50</a></li>\n</ul>'}))):"insert"===a[0]?(-1!==a[1].indexOf("emoji",0)&&n.append(l._buildTollbarButton("insert","emoji","fa fa-smile-o",null)),-1!==a[1].indexOf("link",0)&&n.append(l._buildTollbarButton("insert","link","fa fa-link",null,"Add URL",l._buildUrlForm())),-1!==a[1].indexOf("image",0)&&n.append(l._buildTollbarButton("insert","image","fa fa-image",null,"Add image",l._buildUrlForm("image"))),-1!==a[1].indexOf("video",0)&&n.append(l._buildTollbarButton("insert","video","fa fa-video-camera",null,"Add video",l._buildUrlForm("video"))),-1!==a[1].indexOf("symbol",0)&&n.append(l._buildTollbarButton("insert","symbol","fa fa-hashtag",null)),-1!==a[1].indexOf("bookmark",0)&&n.append(l._buildTollbarButton("insert","bookmark","fa fa-bookmark",null))):"special"===a[0]?(-1!==a[1].indexOf("print",0)&&n.append(l._buildTollbarButton("special","print","fa fa-print",null)),-1!==a[1].indexOf("clean",0)&&n.append(l._buildTollbarButton("special","clean","fa fa-eraser",null)),-1!==a[1].indexOf("unformat",0)&&n.append(l._buildTollbarButton("special","unformat","fa fa-trash-o",null))):"fullscreen"===a[0]&&(n.addClass("pull-right"),n.append(l._buildTollbarButton("fullscreen",!0,"fa fa-arrows-alt",null)));l._$toolbar.append(n)}),l._$toolbar.length&&l._$toolbar.on("click","[data-action]",function(e){var a=t(e.currentTarget),n=a.data("action"),o=(l._selection,a.data("value"));if(void 0!==n&&void 0!==o)switch(n){case"mode":switch(o){case"editor":l._config.mode!==o&&(l._config.mode=o,l._$content.html(l._source),l._$toolbar.find('[data-action="mode"]').removeClass("active"),l._$toolbar.find('[data-action="mode"][data-value="editor"]').addClass("active"),l._$content.addClass("editor-mode").removeClass("source-mode"),l._$content.focus());break;case"source":if(l._config.mode!==o){l._config.mode=o,l._source=l._$content.html();var r=t("<pre />");r.text(l._source),l._$content.html(l._trimSource(r.html())),l._$toolbar.find('[data-action="mode"]').removeClass("active"),l._$toolbar.find('[data-action="mode"][data-value="source"]').addClass("active"),l._$content.removeClass("editor-mode").addClass("source-mode"),l._$content.focus()}}break;case"formatblock":l._formatDoc("formatblock",o);break;case"fontname":l._formatDoc("fontname",o);break;case"fontsize":l._selection.anchorNode.parentElement.removeAttribute("size"),l._selection.anchorNode.parentElement.style.fontSize=o;break;case"style":var i=l._selection.anchorNode.parentElement.style.cssText;i?i+=o:i=o,l._selection.anchorNode.parentElement.removeAttribute("style"),l._selection.anchorNode.parentElement.style=i;break;case"fullscreen":break;case"operations":switch(o){case"undo":l._formatDoc("undo");break;case"rendo":l._formatDoc("rendo");break;case"cut":l._formatDoc("cut");break;case"copy":l._formatDoc("copy");break;case"paste":l._formatDoc("paste")}break;case"text":switch(o){case"bold":l._formatDoc("bold");break;case"italic":l._formatDoc("italic");break;case"underline":l._formatDoc("underline");break;case"strike":l._formatDoc("strikeThrough");break;case"subscript":l._formatDoc("subscript");break;case"superscript":l._formatDoc("superscript")}break;case"font-color":"unset"==o?(l._selection.anchorNode&&(l._selection.anchorNode.parentElement.style.backgroundColor=""),l._selection.anchorNode.parentElement.style.length&&l._selection.anchorNode.parentElement.removeAttribute("style")):(l._$toolbar.find('[data-action="text"][data-value="font-color"] > span').css("border-bottom-color",o),l._formatDoc("foreColor",o));break;case"bg-color":"unset"==o?(l._selection.anchorNode&&(l._selection.anchorNode.parentElement.style.backgroundColor=""),l._selection.anchorNode.parentElement.style.length&&l._selection.anchorNode.parentElement.removeAttribute("style")):(l._$toolbar.find('[data-action="text"][data-value="bg-color"] > span').css("border-bottom-color",o),l._formatDoc("hiliteColor",o));break;case"align":switch(o){case"left":l._formatDoc("justifyLeft");break;case"center":l._formatDoc("justifyCenter");break;case"right":l._formatDoc("justifyRight");break;case"justify":l._formatDoc("justifyFull")}break;case"lists":switch(o){case"unordered":l._formatDoc("insertUnorderedList");break;case"ordered":l._formatDoc("insertOrderedList");break;case"indent":l._formatDoc("indent");break;case"outdent":l._formatDoc("outdent")}break;case"insert-table":if(l._selection.anchorNode){var s=o.split("|",2),c=t(l._selection.anchorNode.parentElement),d=l._generateTable(parseFloat(s[0]),parseFloat(s[2]));c.after(d)}break;case"components":o;break;case"line-height":if(l._selection.anchorNode){var u=100*parseFloat(o)+"%";0==parseFloat(o)?l._selection.anchorNode.parentElement.style.lineHeight="inherit":l._selection.anchorNode.parentElement.style.lineHeight=u}break;case"letter-spacing":if(l._selection.anchorNode){var p=parseFloat(o)+"px";0==parseFloat(o)?l._selection.anchorNode.parentElement.style.letterSpacing="inherit":l._selection.anchorNode.parentElement.style.letterSpacing=p}break;case"add-url":var b=l._selection.toString();if(l._selection&&b){var f=t('<a href="'+o+'" />');f.text(b),(_=l._selection.getRangeAt(0)).deleteContents(),_.insertNode(f.get(0))}break;case"add-image":if(l._selection&&o){var g=t('<img src="'+o+'" />');(_=l._selection.getRangeAt(0)).deleteContents(),_.insertNode(g.get(0))}break;case"add-video":if(l._selection&&o){var _,h=t('<div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="'+o+'"></iframe></div>');(_=l._selection.getRangeAt(0)).deleteContents(),_.insertNode(h.get(0))}break;case"insert":o;break;case"special":switch(o){case"print":l._printDoc();break;case"clean":l._formatDoc("removeFormat");break;case"unformat":l._formatDoc("selectAll"),l._formatDoc("removeFormat");var v=l._$content.html();v=(v=(v=l._stripTags(v)).replace(/(\r\n|\n|\r)/g,"\x3c!-- br --\x3e")).replace(/<!-- br -->/g,"<br/>"),l._$content.html(v)}break;default:console.warn("Unrecognized action: "+n+" with value: "+o)}}),l._$content.on("mouseup click",function(e){if(l._popoverIsVisible&&l._hideAllPopovers(),"text"!==e.target.type&&(l._selection=document.getSelection()),l._selection.getRangeAt&&l._selection.rangeCount)if(l._selection.parentNode){var a=t(l._selection.parentNode);l._updateState(a)}else if(l._selection.parentElement){a=t(l._selection.parentElement);l._updateState(a)}a=t(e.target);l._updateState(a)}),l._$content.on("keyup",function(e){const a=t(this);if(l._popoverIsVisible&&l._hideAllPopovers(),"text"!==e.target.type&&(l._selection=document.getSelection()),l._selection.getRangeAt&&l._selection.rangeCount)if(l._selection.parentNode){var n=t(l._selection.parentNode);l._updateState(n)}else if(l._selection.parentElement){n=t(l._selection.parentElement);l._updateState(n)}n=t(e.target);l._updateState(n),a.trigger("change")}),l._$content.on("change",function(e){const a=t(this);"editor"==l._config.mode?l._source=a.html():l._source=a.text(),l._$element.val(l._source)}),l._$content.on("focus",function(t){l._selection=document.getSelection()}),l._$content.on("blur",function(){l._$lastFocus=this,l._selection=document.getSelection()})}return e(o,{element:{value:function(){return this._$element}},_replaceAll:{value:function(t,e,a){return a.split(t).join(e)}},_stripTags:{value:function(t,e){var a,n=[];e&&(n=e.match(/([a-zA-Z]+)/gi)),"string"!=typeof t&&(t=t.toString());var o=t.match(/(<\/?[\S][^>]*>)/gi);for(a in o)if(!isNaN(a)){var r=o[a].toString(),l=!1;for(a in n){var i=n[a],s=r.toLowerCase().indexOf("<"+i+">");if(0!=s&&(s=r.toLowerCase().indexOf("<"+i+" ")),0!=s&&(s=r.toLowerCase().indexOf("</"+i)),0==s){l=!0;break}}l||(t=this._replaceAll(r,"",t))}return t}},_trimSource:{value:function(t){return t=(t=(t=t.replace(/\s{4,}/g,"")).replace(/\t/g," ")).toString().trim().replace(/(\r\n|\n|\r)/g,"")}},_getPath:{value:function(e,a){for(var n,o=[];e.length;){var r=e[0],l=r.localName,i=e.parentsUntil(a);if(!l)break;l=l.toLowerCase(),o.push(l);var s=t(r).attr("id");s&&(l+="#"+s);var c=t(r).attr("class");c&&(l+="."+c.replace(/\./g,".")),n=l+(n?" > "+n:""),e=i}return{path:n,tags:o}}},_getTextStat:{value:function(t){var e;return e=t&&t.contentEditable?t.innerText.replace(/\r\n/g,"\n"):t.value.replace(/\r\n/g,"\n"),{words:this._stripTags(e).split(" ").length,length:e.length,chars:this._trimSource(e.replace(/\s/g,"")).length}}},_getTextPosition:{value:function(t){var e,a,n,o,r,l=0,i=0,s=0,c=t&&t.contentEditable;return"selectionStart"in t&&document.activeElement==t?(i=t.selectionStart,s=t.selectionEnd,l=(e=t.value.replace(/\r\n/g,"\n")).substr(0,t.selectionStart).split("\n").length):c?(i=window.getSelection().getRangeAt(0).startOffset,s=window.getSelection().getRangeAt(0).endOffset,0==(l=(e=t.innerText.replace(/\r\n/g,"\n")).substr(0,t.selectionStart).split("\n").length-1)&&(l=1)):(a=document._this._selection.createRange())&&a.parentElement()==t&&(o=t.value.length,e=t.value.replace(/\r\n/g,"\n"),(n=t.createTextRange()).moveToBookmark(a.getBookmark()),(r=t.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?i=s=o:(i=-n.moveStart("character",-o),i+=e.slice(0,i).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?s=o:(s=-n.moveEnd("character",-o),s+=e.slice(0,s).split("\n").length-1))),{line:l,start:i,end:s}}},_formatDoc:{value:function(t,e){document.execCommand(t,!1,e),this._$content.focus()}},_printDoc:{value:function(){var t=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");t.document.open(),t.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">'+this._$content.get(0).innerHTML+"</body></html>"),t.document.close()}},_hideAllPopovers:{value:function(){this._$toolbar.find(".popover").each(function(){t(this).popover("hide")}),this._popoverIsVisible=!1}},_buildTollbarButton:{value:function(e,a,n,o,r,l){var i=this,s=(i._selection,t('<button type="button" class="btn btn-default" tabindex="-1" />'));return e&&s.attr("data-action",e),a&&s.attr("data-value",a),o&&s.attr("data-hotkey",o),r&&s.tooltip({html:!0,placement:"top",title:r.toString().trim()}),l?s.popover({html:!0,trigger:"manual",viewport:"body",placement:"bottom",content:l}).on("shown.bs.popover",function(e){var a=t(e.target).attr("aria-describedby"),n=i._$toolbar.find("#"+a),o=i._selection;console.log(o);var r=o.getRangeAt(0);console.log(r),n.find("input").on("blur",function(t){return"text"==t.target.type&&(console.log("blur on input"),i._$lastFocus&&setTimeout(function(){i._$lastFocus.focus(),i._selectText(o,r)},10)),!1}),n.on("click",function(t){"text"!==t.target.type&&n.popover("hide")}),n.find(".table-grid").length&&n.find(".table-grid tr > td").hover(function(){t(this).addClass("selected"),t(this).prevAll().addClass("selected"),t(this).parent().prevAll().find("td:lt("+(t(this).index()+1)+")").addClass("selected")},function(){t(this).removeClass("selected"),t(this).prevAll().removeClass("selected"),t(this).parent().prevAll().find("td:lt("+(t(this).index()+1)+")").removeClass("selected")})}).on("click",function(t){i._popoverIsVisible&&i._hideAllPopovers(),s.popover("show"),i._popoverIsVisible=!0,t.stopPropagation()}):s.on("click",function(t){i._hideAllPopovers()}),n&&s.append('<span class="'+n+'" />'),s}},_buildTollbarDropdown:{value:function(e,a,n){var o=t('<div class="dropdown" />'),r=t('<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" />'),l=t('<ul class="dropdown-menu" />'),i=t("<li />"),s=t('<a href="#" tabindex="-1" />');return"object"==typeof a&&t.each(a,function(a,o){var r=s.clone(),c=i.clone();"object"==typeof o?(o.action&&r.attr("data-action",o.action),o.value&&r.attr("data-value",o.value),o.wrap?r.html(t(o.wrap).text(a)):r.text(a),o.style&&r.attr("style",o.style.toString()),a==n&&c.addClass("active"),c.append(r),l.append(c)):(r.text(o),r.attr("data-action",e),r.attr("data-value",o),o==n&&c.addClass("active"),c.append(r),l.append(c))}),n?r.text(n+" "):r.text("Dropdown "),r.append('<b class="caret" />'),o.append(r),o.append(l),o}},_buildColorPalette:{value:function(e,a,n){var o="";return t.each(e,function(e,n){o+='<table class="color-palette"><tr>',t.each(n,function(t,e){o+='<td><a href="#" data-action="'+a+'" data-value="'+e+'" style="background-color: '+e+'">&nbsp;</a></td>',o+=(parseInt(t)+1)%10?"":"</tr>",o+=(parseInt(t)+1)%10?"":"<tr>"}),o+="</tr></table>"}),n&&(o+='<p><a href="#" class="btn btn-sm btn-block" data-action="'+a+'" data-value="unset">Reset color</a></p>'),o}},_buildTableGrid:{value:function(){for(var t='<table class="table-grid">',e=1;e<=6;e++){t+="<tr>";for(var a=1;a<=8;a++)t+='<td><a href="#" data-action="insert-table" data-value="'+e+"|"+a+'">&nbsp;</a></td>';t+="</tr>"}return t+="</table>"}},_addUrl:{value:function(t){}},_selectText:{value:function(t,e){t||(t=document.getSelection()),e||(e=t.getRangeAt(0)),t.removeAllRanges(),t.addRange(e)}},_buildUrlForm:{value:function(t){var e='<form class="form-inline">';return e+='<div class="form-group">',e+='<div class="input-group input-group-sm">',e+="image"==t?'<span class="input-group-addon">Image:</span>':"video"==t?'<span class="input-group-addon">YouTube:</span>':'<span class="input-group-addon">URL:</span>',e+='<input type="text" class="form-control" id="urlInput" placeholder="http://" />',e+='<span class="input-group-btn">',e+="image"==t?'<button type="button" data-action="add-image" onclick="javascript: this.setAttribute(\'data-value\', document.getElementById(\'urlInput\').value);" class="btn btn-block btn-primary">Add</button>':"video"==t?'<button type="button" data-action="add-video" onclick="javascript: this.setAttribute(\'data-value\', document.getElementById(\'urlInput\').value);" class="btn btn-block btn-primary">Add</button>':'<button type="button" data-action="add-url" onclick="javascript: this.setAttribute(\'data-value\', document.getElementById(\'urlInput\').value);" class="btn btn-block btn-primary">Add</button>',e+="</span>",e+="</div>",e+="</div>",e+="</form>"}},_generateTable:{value:function(t,e){t=parseInt(t)+1,(e=parseInt(t))||(e=1);for(var a='<table class="table">',n=1;n<=t;n++){1==n?a+="<thead>":n==t-n-1&&(a+="<tbody>"),a+="<tr>";for(var o=1;o<=e;o++)a+=1==n?"<th>Header "+o+"</th>":"<td>&nbsp;</td>";a+="</tr>",1==n?a+="</thead>":n==t&&(a+="</tbody>")}return a+="</table>"}},_updateState:{value:function(t,e){if("editor"==this._config.mode){var a=this._getTextStat(this._$content.get(0)),n=this._getPath(t,this._$content);if(e)this._$toolbar.find("button[data-action]").removeClass("active");else switch(n.tags[0]){case"b":this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="text"][data-value="bold"]').addClass("active");break;case"u":this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="text"][data-value="underline"]').addClass("active");break;case"sub":this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="text"][data-value="subscript"]').addClass("active");break;case"sup":this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="text"][data-value="superscript"]').addClass("active");break;case"i":this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="text"][data-value="italic"]').addClass("active");break;case"a":this._$toolbar.find('[data-action="insert"]').removeClass("active"),this._$toolbar.find('[data-action="insert"][data-value="link"]').addClass("active");break;case"p":this._$toolbar.find('[data-action="align"]').removeClass("active"),"center"==t.css("text-align")?this._$toolbar.find('[data-action="align"][data-value="center"]').addClass("active"):"right"==t.css("text-align")?this._$toolbar.find('[data-action="align"][data-value="right"]').addClass("active"):"justify"==t.css("text-align")?this._$toolbar.find('[data-action="align"][data-value="justify"]').addClass("active"):this._$toolbar.find('[data-action="align"][data-value="left"]').addClass("active");break;default:this._$toolbar.find('[data-action="text"]').removeClass("active"),this._$toolbar.find('[data-action="align"]').removeClass("active"),this._$toolbar.find('[data-action="insert"]').removeClass("active")}this._$statusbar.path.text(n.path),this._$statusbar.stat.text("Length: "+a.length+", chars: "+a.chars+", words: "+a.words)}else{var o=this._getTextPosition(this._$content.get(0));this._$statusbar.path.empty(),this._$statusbar.stat.text("Line: "+o.line+", column: "+o.end)}return this._$element}}},{Default:{get:function(){return r}},_jQueryInterface:{value:function(e){var a=this;return e=e||{},a.each(function(){var r=t(a),l=t.extend({},n.Default,r.data(),"object"==typeof e&&e);new o(a,l)})}}}),o}();return t.fn.wysiwyg=l._jQueryInterface,t.fn.wysiwyg.Constructor=l,t.fn.wysiwyg.noConflict=function(){return t.fn.wysiwyg=o,l._jQueryInterface},l}(jQuery)}(jQuery);
//# sourceMappingURL=wysiwyg.js.map